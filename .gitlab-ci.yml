variables:
  GIT_STRATEGY: clone
  GIT_SUBMODULE_STRATEGY: recursive
# Use the official gcc image
stages:
    - build
    - testing
    - performance
    - documentation
CoMMA:
    image: gcc
    stage: build
    before_script:
        - apt-get update && apt-get -y install cmake && apt-get -y install libpython3.9-dev
    script:
        - mkdir build
        - cd build
        - cmake ..
        - make
    stage: testing
    script:
      - cd build
      - ./Comma_test
    artifacts:
        paths:
        - build/
Performance:
    image: alpine:latest
    stage: performance
    before_script:
        - apk update
        - apk add linux-tools-common 
        - apk add linux-tools-generic
    script:
      - cd build
      - perf record -g ./Profiling_perf
      - perf report
    artifacts:
        paths:
        - build/perf.data
pages:
    image: alpine:latest
    stage : documentation
    before_script:
        - apk update
        - apk add doxygen
    script:
        - apk update && apk add doxygen
        - doxygen Documentation/Doxyfile
        - mv documentation/html/ public/
    artifacts:
        paths:
            - public




