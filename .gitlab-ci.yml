variables:
  GIT_STRATEGY: clone
  GIT_SUBMODULE_STRATEGY: recursive
# Use the official gcc image
stages:
    - build 
    - test
    - performance
    - documentation
image: alpine:latest
before_script:
    - apk update 
    - apk add cmake 
    - apk add python3
    - apk add build-base 
    - apk add linux-tools
    - apk add doxygen
CoMMA:
    stage: build
    script:
        - mkdir build
        - cd build
        - cmake ..
        - make
test_a:
    stage: test
    needs: [CoMMA]
    script:
        - cd build
        - ./Comma_test
Perf_Linux_tools:
    stage: performance
    needs: [CoMMA]
    script:
      - cd build
      - perf record -g ./Profiling_perf
      - perf report
    artifacts:
        paths:
        - build/perf.data
pages:
    stage: documentation
    script:
        - doxygen Documentation/Doxyfile
        - mv documentation/html/ public/
    artifacts:
        paths:
            - public




